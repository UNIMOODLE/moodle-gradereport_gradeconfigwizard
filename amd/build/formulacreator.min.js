define("gradereport_gradeconfigwizard/formulacreator",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/*
   * Display information about all the gradereport_gradeconfigwizard modules in the requested course. *
   * @package gradeconfigwizard
   * @copyright 2023 Proyecto UNIMOODLE
   * @author UNIMOODLE Group (Coordinator) &lt;direccion.area.estrategia.digital@uva.es&gt;
   * @author Joan Carbassa (IThinkUPC) &lt;joan.carbassa@ithinkupc.com&gt;
   * @author Yerai Rodríguez (IThinkUPC) &lt;yerai.rodriguez@ithinkupc.com&gt;
   * @author Marc Geremias (IThinkUPC) &lt;marc.geremias@ithinkupc.com&gt;
   * @author Miguel Gutiérrez (UPCnet) &lt;miguel.gutierrez.jariod@upcnet.es&gt;
   * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
  */
let selecteditemscheckboxes=document.querySelectorAll(".formulacreator-select-items input[type=checkbox]"),aggregationmethoddiv=document.querySelector(".formulacreator-aggregation-method"),weightsdefinitiondiv=document.querySelector(".formulacreator-weights-definition"),weightsdefinitiontable=document.querySelector(".formulacreator-weights-definition table tbody"),aggregationmethodselect=document.querySelector(".formulacreator-aggregation-method select"),formulapreviewbox=document.querySelector(".formulacreator-formula"),formulapreviewtextarea=document.querySelector(".formulacreator-formula textarea"),previewformulabutton=document.getElementById("formulacreator-preview-formula");const addEventToCheckbox=()=>{for(let i=0;i<selecteditemscheckboxes.length;i++)selecteditemscheckboxes[i].addEventListener("change",(function(){let alMenosUnoMarcado=!1;for(let j=0;j<selecteditemscheckboxes.length;j++)if(selecteditemscheckboxes[j].checked){alMenosUnoMarcado=!0;break}alMenosUnoMarcado?(aggregationmethoddiv.classList.remove("disabled-box"),"0"!==aggregationmethodselect.value&&weightsdefinitiondiv.classList.remove("disabled-box")):(aggregationmethoddiv.classList.add("disabled-box"),weightsdefinitiondiv.classList.add("disabled-box"));let weightenabled="";if(this.checked){weightenabled="weightedmeangrades"===aggregationmethodselect.value?"1":"0";let newrow=weightsdefinitiontable.insertRow(-1);newrow.innerHTML='<th scope="row">'+this.dataset.displayname+'</th><td><input type="number" min="0" step="1" data-enabled="'+weightenabled+'" data-itemdisplayname="'+this.dataset.displayname+'" data-itemidnumber="'+this.dataset.idnumber+'" data-itemid="'+this.dataset.id+'" data-paramtype="weight" class="form-control" placeholder="" value="1"></td>',newrow.dataset.id=this.dataset.id}else{let weightsdefinitionmatchingrow=weightsdefinitiontable.querySelector('[data-id="'+this.dataset.id+'"]');weightsdefinitionmatchingrow&&weightsdefinitionmatchingrow.remove()}}))},aggregationSelection=()=>{aggregationmethodselect.addEventListener("change",(function(){"0"===this.value?weightsdefinitiondiv.classList.add("disabled-box"):weightsdefinitiondiv.classList.remove("disabled-box");let weightitems=weightsdefinitiondiv.querySelectorAll('[data-paramtype="weight"]');switch(this.value){case"weightedmeangrades":weightitems.forEach((function(weightitem){weightitem.dataset.enabled=1,weightitem.classList.remove("disabled-box")}));break;case"meangrades":case"sum":case"highest":case"lowest":weightitems.forEach((function(weightitem){weightitem.dataset.enabled=0,weightitem.classList.add("disabled-box")}))}}))};_exports.init=()=>{addEventToCheckbox(),aggregationSelection(),previewformulabutton.addEventListener("click",(function(){formulapreviewbox.classList.remove("disabled-box");let selectedformulaitems=weightsdefinitiontable.querySelectorAll('[data-paramtype="weight"]'),itemsformula="";selectedformulaitems.forEach((function(selectedformulaitem){let itemformula="";itemformula="  <ITEM>",itemformula+="<DISPLAYNAME>"+selectedformulaitem.dataset.itemdisplayname+"</DISPLAYNAME>",itemformula+="<IDNUMBER>"+selectedformulaitem.dataset.itemidnumber+"</IDNUMBER>",itemformula+="<GRADEITEMID>"+selectedformulaitem.dataset.itemid+"</GRADEITEMID>","1"===selectedformulaitem.dataset.enabled&&(itemformula+="<WEIGHT>"+selectedformulaitem.value+"</WEIGHT>"),itemformula+="</ITEM>\n",itemsformula+=itemformula}));let exampleformulas={meangrades:"<MEANGRADES>\n  "+itemsformula.trim()+"\n</MEANGRADES>",weightedmeangrades:"<WEIGHTEDMEANGRADES>\n"+itemsformula.trim()+"\n</WEIGHTEDMEANGRADES>",sum:"<SUM>\n"+itemsformula.trim()+"\n</SUM>",highest:"<HIGHEST>\n"+itemsformula.trim()+"\n</HIGHEST>",lowest:"<LOWEST>\n"+itemsformula.trim()+"\n</LOWEST>"};formulapreviewtextarea.value=exampleformulas[aggregationmethodselect.value]}))}}));

//# sourceMappingURL=formulacreator.min.js.map
